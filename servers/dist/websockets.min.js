"use strict";var WebSocketServer=require("ws").Server,resources=require("./../resources/model");function selectResouce(e){var r=e.split("/");r.shift();for(var o=resources,s=0;s<r.length;s++)o=o[r[s]];return o}exports.listen=function(e){var r=new WebSocketServer({server:e});console.info("WebSocket server started..."),r.on("connection",function(r){var o=r.upgradeReq.url;console.info(o);try{Object.observe(selectResouce(o),function(e){r.send(JSON.stringify(e[0].object),function(){})})}catch(e){console.log("Unable to observe %s resource!",o)}})};
//# sourceMappingURL=websockets.min.js.map
